{
  "metadata": {
    "sourceFile": "utils/auth.ts",
    "generatedAt": "2025-10-05T02:59:39.900Z",
    "version": "1.0.0",
    "cli": "clack"
  },
  "nodes": [
    {
      "id": "1",
      "type": "authStarter",
      "position": {
        "x": 250,
        "y": 50
      },
      "data": {
        "label": "Auth Starter"
      }
    },
    {
      "id": "2",
      "type": "database",
      "position": {
        "x": 0,
        "y": 150
      },
      "data": {
        "label": "Database"
      }
    },
    {
      "id": "3",
      "type": "drizzle",
      "position": {
        "x": 0,
        "y": 250
      },
      "data": {
        "label": "Drizzle Adapter"
      }
    },
    {
      "id": "4",
      "type": "pg",
      "position": {
        "x": 0,
        "y": 350
      },
      "data": {
        "label": "PG"
      }
    },
    {
      "id": "5",
      "type": "emailAuth",
      "position": {
        "x": 400,
        "y": 150
      },
      "data": {
        "label": "Email & Password"
      }
    },
    {
      "id": "6",
      "type": "userConfig",
      "position": {
        "x": 400,
        "y": 250
      },
      "data": {
        "label": "User Configuration"
      }
    },
    {
      "id": "7",
      "type": "socialLogin",
      "position": {
        "x": 400,
        "y": 350
      },
      "data": {
        "label": "Social Providers"
      }
    },
    {
      "id": "8",
      "type": "oauthGoogle",
      "position": {
        "x": 600,
        "y": 450
      },
      "data": {
        "label": "Google OAuth"
      }
    },
    {
      "id": "9",
      "type": "plugins",
      "position": {
        "x": 800,
        "y": 500
      },
      "data": {
        "label": "Plugins"
      }
    },
    {
      "id": "10",
      "type": "polarPlugin",
      "position": {
        "x": 1000,
        "y": 600
      },
      "data": {
        "label": "Polar (Checkout, Portal, Usage, Webhooks)"
      }
    },
    {
      "id": "11",
      "type": "nextCookies",
      "position": {
        "x": 1000,
        "y": 680
      },
      "data": {
        "label": "Next.js Cookies"
      }
    }
  ],
  "edges": [
    {
      "id": "e1-2",
      "source": "1",
      "target": "2",
      "animated": true
    },
    {
      "id": "e1-3",
      "source": "1",
      "target": "3",
      "animated": true
    },
    {
      "id": "e1-4",
      "source": "1",
      "target": "4",
      "animated": true
    },
    {
      "id": "e1-5",
      "source": "1",
      "target": "5",
      "animated": true
    },
    {
      "id": "e1-6",
      "source": "1",
      "target": "6",
      "animated": true
    },
    {
      "id": "e1-7",
      "source": "1",
      "target": "7",
      "animated": true
    },
    {
      "id": "e1-8",
      "source": "1",
      "target": "8",
      "animated": true
    },
    {
      "id": "e1-9",
      "source": "1",
      "target": "9",
      "animated": true
    },
    {
      "id": "e1-10",
      "source": "1",
      "target": "10",
      "animated": true
    },
    {
      "id": "e1-11",
      "source": "1",
      "target": "11",
      "animated": true
    }
  ],
  "authContent": "import { betterAuth } from \"better-auth\";\nimport { drizzleAdapter } from \"better-auth/adapters/drizzle\";\nimport { db } from \"@/db/drizzle\";\nimport {schema} from \"@/db/schema\"\nimport { nextCookies } from \"better-auth/next-js\";\nimport { polar, checkout, portal, usage, webhooks } from \"@polar-sh/better-auth\";\nimport { Polar } from \"@polar-sh/sdk\";\n\nconst polarClient = new Polar({\n    accessToken: process.env.POLAR_ACCESS_TOKEN,\n    server: 'sandbox'\n});\nexport const auth = betterAuth({\n  emailAndPassword: { \n    enabled: true, \n  }, \n  user: {\n    additionalFields: {\n      role: {\n        type: \"string\",\n        required: false,\n        defaultValue: \"user\",\n        input: false,\n      }\n    },\n    deleteUser: { enabled: true } \n  },\n  database: drizzleAdapter(db, {\n    provider: \"pg\",\n    schema,\n  }),\n  socialProviders: {\n    google: { \n        clientId: process.env.GOOGLE_CLIENT_ID as string, \n        clientSecret: process.env.GOOGLE_CLIENT_SECRET as string, \n    }, \n},\n  plugins: [\n    polar({\n      client: polarClient,\n      createCustomerOnSignUp: true,\n      use: [\n          checkout({\n              products: [\n                {\n                  productId: \"88c88042-ede8-4290-8e6e-b96291bf4c87\",\n                  slug: \"free\"\n                },\n                  {\n                      productId: \"447405a4-6037-42f5-9138-aa519625dc3e\", // ID of Product from Polar Dashboard\n                      slug: \"pro\" // Custom slug for easy reference in Checkout URL, e.g. /checkout/pro\n                  },\n                  {\n                      productId: \"d6aea22f-6156-4bc9-9f4c-a937ad05fa0f\", // ID of Product from Polar Dashboard\n                      slug: \"enterprise\" // Custom slug for easy reference in Checkout URL, e.g. /checkout/pro\n                  }\n              ],\n              successUrl: \"/dashboard\",\n              authenticatedUsersOnly: true\n          }),\n          portal(),\n          usage(),\n          webhooks({\n              secret: process.env.POLAR_WEBHOOK_SECRET as string,\n          })\n      ],\n  }),\n  nextCookies(),\n \n  ]\n});",
  "parsedConfig": {
    "database": "drizzle",
    "databaseProvider": "pg",
    "features": [
      "Email & Password"
    ],
    "socialProviders": [
      "Google"
    ],
    "userFields": [
      "role"
    ],
    "plugins": [
      "Polar (Checkout, Portal, Usage, Webhooks)",
      "Next.js Cookies"
    ]
  }
}